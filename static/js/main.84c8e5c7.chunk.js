(this["webpackJsonpavalanche-amm"]=this["webpackJsonpavalanche-amm"]||[]).push([[0],{15:function(e,t,n){},49:function(e,t){},57:function(e,t){},60:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(36),c=n.n(r),i=(n(15),n(2)),s=n.n(i),u=n(10),o=n(8),l=n(29),d=1e6,p=/^[0-9]*[.]?[0-9]{0,6}$/,b="0x806D6B235C33c6B5b82EcD3B11509eFeC61BF643",m=[{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"},{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"faucet",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"},{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"provide",outputs:[{internalType:"uint256",name:"share",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"}],name:"swapToken1",outputs:[{internalType:"uint256",name:"amountToken2",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"swapToken2",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_share",type:"uint256"}],name:"withdraw",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"},{internalType:"uint256",name:"amountToken2",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"getEquivalentToken1Estimate",outputs:[{internalType:"uint256",name:"reqToken1",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"}],name:"getEquivalentToken2Estimate",outputs:[{internalType:"uint256",name:"reqToken2",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMyHoldings",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"},{internalType:"uint256",name:"amountToken2",type:"uint256"},{internalType:"uint256",name:"myShare",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolDetails",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"}],name:"getSwapToken1Estimate",outputs:[{internalType:"uint256",name:"amountToken2",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"getSwapToken1EstimateGivenToken2",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken2",type:"uint256"}],name:"getSwapToken2Estimate",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_amountToken1",type:"uint256"}],name:"getSwapToken2EstimateGivenToken1",outputs:[{internalType:"uint256",name:"amountToken2",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_share",type:"uint256"}],name:"getWithdrawEstimate",outputs:[{internalType:"uint256",name:"amountToken1",type:"uint256"},{internalType:"uint256",name:"amountToken2",type:"uint256"}],stateMutability:"view",type:"function"}],v=n(22),j=n(24),x=n(5);function f(e){return Object(x.jsx)("div",{className:"boxTemplate",children:Object(x.jsxs)("div",{className:"boxBody",children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("p",{className:"leftHeader",children:[" ",e.leftHeader," "]}),Object(x.jsx)("input",{className:"textField",value:e.value,onChange:function(t){return function(t){(""===t.target.value||p.test(t.target.value))&&e.onChange(t)}(t)},placeholder:"Enter amount"})]}),Object(x.jsx)("div",{className:"rightContent",children:e.right})]})})}function h(e){var t=Object(a.useState)(["KAR","KOTHI"]),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(0),l=Object(o.a)(i,2),p=l[0],b=l[1],m=Object(a.useState)(0),h=Object(o.a)(m,2),y=h[0],O=h[1],k=function(){var t=Object(u.a)(s.a.mark((function t(n){var a,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(n)){t.next=2;break}return t.abrupt("return");case 2:if(null===e.contract){t.next=19;break}if(t.prev=3,"KAR"!==r[0]){t.next=10;break}return t.next=7,e.contract.getSwapToken1Estimate(n*d);case 7:a=t.sent,t.next=13;break;case 10:return t.next=12,e.contract.getSwapToken2Estimate(n*d);case 12:a=t.sent;case 13:O(a/d),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),alert(null===t.t0||void 0===t.t0||null===(c=t.t0.data)||void 0===c?void 0:c.message);case 19:case"end":return t.stop()}}),t,null,[[3,16]])})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=Object(u.a)(s.a.mark((function t(n){var a,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(n)){t.next=2;break}return t.abrupt("return");case 2:if(null===e.contract){t.next=19;break}if(t.prev=3,"KAR"!==r[0]){t.next=10;break}return t.next=7,e.contract.getSwapToken1EstimateGivenToken2(n*d);case 7:a=t.sent,t.next=13;break;case 10:return t.next=12,e.contract.getSwapToken2EstimateGivenToken1(n*d);case 12:a=t.sent;case 13:b(a/d),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),alert(null===t.t0||void 0===t.t0||null===(c=t.t0.data)||void 0===c?void 0:c.message);case 19:case"end":return t.stop()}}),t,null,[[3,16]])})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(u.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(p)){t.next=3;break}return alert("Amount should be a valid number"),t.abrupt("return");case 3:if(null!==e.contract){t.next=8;break}return alert("Connect to Metamask"),t.abrupt("return");case 8:if(t.prev=8,"KAR"!==r[0]){t.next=15;break}return t.next=12,e.contract.swapToken1(p*d);case 12:n=t.sent,t.next=18;break;case 15:return t.next=17,e.contract.swapToken2(p*d);case 17:n=t.sent;case 18:return t.next=20,n.wait();case 20:return b(0),O(0),t.next=24,e.getHoldings();case 24:alert("Success!"),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(8),alert(null===t.t0||void 0===t.t0||null===(a=t.t0.data)||void 0===a?void 0:a.message);case 30:case"end":return t.stop()}}),t,null,[[8,27]])})));return function(){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"tabBody",children:[Object(x.jsx)(f,{leftHeader:"From",right:r[0],value:p,onChange:function(e){return b((t=e).target.value),void k(t.target.value);var t}}),Object(x.jsx)("div",{className:"swapIcon",onClick:function(){return c(Object(v.a)(r.reverse())),void k(p)},children:Object(x.jsx)(j.b,{})}),Object(x.jsx)(f,{leftHeader:"To",right:r[1],value:y,onChange:function(e){return O((t=e).target.value),void T(t.target.value);var t}}),Object(x.jsx)("div",{className:"bottomDiv",children:Object(x.jsx)("div",{className:"btn",onClick:function(){return g()},children:"Swap"})})]})}function y(e){var t=Object(a.useState)(0),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(0),l=Object(o.a)(i,2),p=l[0],b=l[1],m=Object(a.useState)(""),v=Object(o.a)(m,2),h=v[0],y=v[1],O=function(){var t=Object(u.a)(s.a.mark((function t(n,a){var r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(a)){t.next=2;break}return t.abrupt("return");case 2:if(null===e.contract){t.next=21;break}if(t.prev=3,"KAR"!==n){t.next=11;break}return t.next=7,e.contract.getEquivalentToken2Estimate(a*d);case 7:r=t.sent,b(r/d),t.next=15;break;case 11:return t.next=13,e.contract.getEquivalentToken1Estimate(a*d);case 13:r=t.sent,c(r/d);case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(3),console.log("Err: ",t.t0),t.t0.data.message.includes("Zero Liquidity")?y("Message: Empty pool. Set the initial conversion rate."):alert(null===t.t0||void 0===t.t0||null===(i=t.t0.data)||void 0===i?void 0:i.message);case 21:case"end":return t.stop()}}),t,null,[[3,17]])})));return function(e,n){return t.apply(this,arguments)}}(),k=function(){var t=Object(u.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(r)&&!["","."].includes(p)){t.next=3;break}return alert("Amount should be a valid number"),t.abrupt("return");case 3:if(null!==e.contract){t.next=8;break}return alert("Connect to Metamask"),t.abrupt("return");case 8:return t.prev=8,t.next=11,e.contract.provide(r*d,p*d);case 11:return n=t.sent,t.next=14,n.wait();case 14:return c(0),b(0),t.next=18,e.getHoldings();case 18:alert("Success"),y(""),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(8),t.t0&&alert(null===t.t0||void 0===t.t0||null===(a=t.t0.data)||void 0===a?void 0:a.message);case 25:case"end":return t.stop()}}),t,null,[[8,22]])})));return function(){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"tabBody",children:[Object(x.jsx)(f,{leftHeader:"Amount of KAR",value:r,onChange:function(e){return function(e){c(e.target.value),O("KAR",e.target.value)}(e)}}),Object(x.jsx)("div",{className:"swapIcon",children:Object(x.jsx)(j.a,{})}),Object(x.jsx)(f,{leftHeader:"Amount of KOTHI",value:p,onChange:function(e){return function(e){b(e.target.value),O("KOTHI",e.target.value)}(e)}}),Object(x.jsx)("div",{className:"error",children:h}),Object(x.jsx)("div",{className:"bottomDiv",children:Object(x.jsx)("div",{className:"btn",onClick:function(){return k()},children:"Provide"})})]})}function O(e){var t=Object(a.useState)(0),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),l=Object(o.a)(i,2),p=l[0],b=l[1],m=function(){var t=Object(u.a)(s.a.mark((function t(n){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c(n.target.value),["","."].includes(n.target.value)||null===e.contract){t.next=12;break}return t.prev=2,t.next=5,e.contract.getWithdrawEstimate(n.target.value*d);case 5:a=t.sent,b([a.amountToken1/d,a.amountToken2/d]),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),alert(null===t.t0||void 0===t.t0||null===(r=t.t0.data)||void 0===r?void 0:r.message);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.contract){t.next=8;break}return c(e.maxShare),t.next=4,e.contract.getWithdrawEstimate(e.maxShare*d);case 4:n=t.sent,b([n.amountToken1/d,n.amountToken2/d]),t.next=9;break;case 8:alert("Connect to Metamask");case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=Object(u.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!["","."].includes(r)){t.next=3;break}return alert("Amount should be a valid number"),t.abrupt("return");case 3:if(!(e.maxShare<r)){t.next=6;break}return alert("Amount should be less than your max share"),t.abrupt("return");case 6:if(null!==e.contract){t.next=11;break}return alert("Connect to Metamask"),t.abrupt("return");case 11:return t.prev=11,t.next=14,e.contract.withdraw(r*d);case 14:return n=t.sent,console.log(n),t.next=18,n.wait();case 18:return c(0),b([]),t.next=22,e.getHoldings();case 22:alert("Success!"),t.next=28;break;case 25:t.prev=25,t.t0=t.catch(11),alert(null===t.t0||void 0===t.t0||null===(a=t.t0.data)||void 0===a?void 0:a.message);case 28:case"end":return t.stop()}}),t,null,[[11,25]])})));return function(){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"tabBody",children:[Object(x.jsx)(f,{leftHeader:"Amount:",right:Object(x.jsx)("div",{onClick:function(){return v()},className:"getMax",children:"Max"}),value:r,onChange:function(e){return m(e)}}),p.length>0&&Object(x.jsxs)("div",{className:"withdrawEstimate",children:[Object(x.jsxs)("div",{className:"amount",children:["Amount of Kar: ",p[0]]}),Object(x.jsxs)("div",{className:"amount",children:["Amount of Kothi: ",p[1]]})]}),Object(x.jsx)("div",{className:"bottomDiv",children:Object(x.jsx)("div",{className:"btn",onClick:function(){return j()},children:"Withdraw"})})]})}function k(e){var t=Object(a.useState)(0),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(0),l=Object(o.a)(i,2),p=l[0],b=l[1];function m(){return(m=Object(u.a)(s.a.mark((function t(){var n,a,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.contract){t.next=3;break}return alert("Connect to Metamask"),t.abrupt("return");case 3:if(!["","."].includes(r)&&!["","."].includes(p)){t.next=6;break}return alert("Amount should be a valid number"),t.abrupt("return");case 6:return t.prev=6,t.next=9,e.contract.faucet(r*d,p*d);case 9:return n=t.sent,t.next=12,n.wait();case 12:return a=t.sent,console.log("res",a),c(0),b(0),t.next=18,e.getHoldings();case 18:alert("Success"),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(6),(null===t.t0||void 0===t.t0||null===(i=t.t0.data)||void 0===i?void 0:i.message)&&alert(null===t.t0||void 0===t.t0||null===(u=t.t0.data)||void 0===u?void 0:u.message),console.log(t.t0);case 25:case"end":return t.stop()}}),t,null,[[6,21]])})))).apply(this,arguments)}return Object(x.jsxs)("div",{className:"tabBody",children:[Object(x.jsx)(f,{leftHeader:"Amount of KAR",right:"KAR",value:r,onChange:function(e){return function(e){c(e.target.value)}(e)}}),Object(x.jsx)(f,{leftHeader:"Amount of KOTHI",right:"KOTHI",value:p,onChange:function(e){return function(e){b(e.target.value)}(e)}}),Object(x.jsx)("div",{className:"bottomDiv",children:Object(x.jsx)("div",{className:"btn",onClick:function(){return function(){return m.apply(this,arguments)}()},children:"Fund"})})]})}function T(e){var t=Object(a.useState)("Swap"),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(0),l=Object(o.a)(i,2),p=l[0],b=l[1],m=Object(a.useState)(0),v=Object(o.a)(m,2),j=v[0],f=v[1],T=Object(a.useState)(0),g=Object(o.a)(T,2),w=g[0],N=g[1],S=Object(a.useState)(0),C=Object(o.a)(S,2),A=C[0],H=C[1],M=Object(a.useState)(0),E=Object(o.a)(M,2),K=E[0],R=E[1],B=Object(a.useState)(0),_=Object(o.a)(B,2),D=_[0],F=_[1];function I(){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Fetching holdings----"),t.next=4,e.contract.getMyHoldings();case 4:return n=t.sent,b(n.amountToken1/d),f(n.amountToken2/d),N(n.myShare/d),t.next=10,e.contract.getPoolDetails();case 10:n=t.sent,H(n[0]/d),R(n[1]/d),F(n[2]/d),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.log("Couldn't Fetch holdings",t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}Object(a.useEffect)((function(){I()}));var W=function(e){c(e)};return Object(x.jsxs)("div",{className:"centerBody",children:[Object(x.jsxs)("div",{className:"centerContainer",children:[Object(x.jsxs)("div",{className:"selectTab",children:[Object(x.jsx)("div",{className:"tabStyle "+("Swap"===r?"activeTab":""),onClick:function(){return W("Swap")},children:"Swap"}),Object(x.jsx)("div",{className:"tabStyle "+("Provide"===r?"activeTab":""),onClick:function(){return W("Provide")},children:"Provide"}),Object(x.jsx)("div",{className:"tabStyle "+("Withdraw"===r?"activeTab":""),onClick:function(){return W("Withdraw")},children:"Withdraw"}),Object(x.jsx)("div",{className:"tabStyle "+("Faucet"===r?"activeTab":""),onClick:function(){return W("Faucet")},children:"Faucet"})]}),"Swap"===r&&Object(x.jsx)(h,{contract:e.contract,getHoldings:function(){return I()}}),"Provide"===r&&Object(x.jsx)(y,{contract:e.contract,getHoldings:function(){return I()}}),"Withdraw"===r&&Object(x.jsx)(O,{contract:e.contract,maxShare:w,getHoldings:function(){return I()}}),"Faucet"===r&&Object(x.jsx)(k,{contract:e.contract,getHoldings:function(){return I()}})]}),Object(x.jsx)("div",{className:"details",children:Object(x.jsxs)("div",{className:"detailsBody",children:[Object(x.jsx)("div",{className:"detailsHeader",children:"Details"}),Object(x.jsxs)("div",{className:"detailsRow",children:[Object(x.jsx)("div",{className:"detailsAttribute",children:"Amount of KAR:"}),Object(x.jsx)("div",{className:"detailsValue",children:p})]}),Object(x.jsxs)("div",{className:"detailsRow",children:[Object(x.jsx)("div",{className:"detailsAttribute",children:"Amount of KOTHI:"}),Object(x.jsx)("div",{className:"detailsValue",children:j})]}),Object(x.jsxs)("div",{className:"detailsRow",children:[Object(x.jsx)("div",{className:"detailsAttribute",children:"Your Share:"}),Object(x.jsx)("div",{className:"detailsValue",children:w})]}),Object(x.jsx)("div",{className:"detailsHeader",children:"Pool Details"}),Object(x.jsxs)("div",{className:"detailsRow",children:[Object(x.jsx)("div",{className:"detailsAttribute",children:"Total KAR:"}),Object(x.jsx)("div",{className:"detailsValue",children:A})]}),Object(x.jsxs)("div",{className:"detailsRow",children:[Object(x.jsx)("div",{className:"detailsAttribute",children:"Total KOTHI:"}),Object(x.jsx)("div",{className:"detailsValue",children:K})]}),Object(x.jsxs)("div",{className:"detailsRow",children:[Object(x.jsx)("div",{className:"detailsAttribute",children:"Total Shares:"}),Object(x.jsx)("div",{className:"detailsValue",children:D})]})]})})]})}function g(){var e,t,n,r=Object(a.useState)(null),c=Object(o.a)(r,2),i=c[0],d=c[1],p=Object(a.useState)(),v=Object(o.a)(p,2),j=v[0],f=v[1];function h(){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(s.a.mark((function a(){var r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O();case 2:if(!0!==a.sent){a.next=13;break}return e=new l.a.providers.Web3Provider(window.ethereum),t=e.getSigner(),a.next=8,t.getAddress();case 8:n=a.sent,f(n);try{r=new l.a.Contract(b,m,t),d(r)}catch(c){alert("CONTRACT_ADDRESS not set properly")}a.next=14;break;case 13:alert("Couldn't connect to Metamask");case 14:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function O(){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.enable();case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(x.jsxs)("div",{className:"pageBody",children:[Object(x.jsxs)("div",{className:"navBar",children:[Object(x.jsx)("div",{className:"appName",children:" AMM "}),null===i?Object(x.jsxs)("div",{className:"connectBtn",onClick:function(){return h()},children:[" ","Connect to Metamask"," "]}):Object(x.jsxs)("div",{className:"connected",children:[" ","Connected to "+j," "]})]}),Object(x.jsx)(T,{contract:i,connect:function(){return h()}})]})}c.a.render(Object(x.jsx)(g,{}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.84c8e5c7.chunk.js.map